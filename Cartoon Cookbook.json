{
  "name": "Cartoon Cookbook",
  "nodes": [
    {
      "parameters": {
        "jsCode": "// n8n Code Node Script\n// è¾“å…¥ï¼šæœŸæœ›ä¸€ä¸ªåŒ…å« 'foodname'ã€'language' å’Œ 'teshumiaoshu' å­—æ®µçš„æ•°æ®é¡¹\n// è¾“å‡ºï¼šè¿”å›ä¸€ä¸ªåŒ…å«æ–°å­—æ®µ 'ai_prompt' çš„æ•°æ®é¡¹ï¼Œè¯¥å­—æ®µä¸ºç”Ÿæˆçš„ã€åŒ…å«èœåæ˜¾ç¤ºæŒ‡ä»¤çš„ç»“æ„åŒ–æç¤ºè¯ã€‚\n\nconst foodName = $input.first().json[\"Dish Name\"];\nconst language = ($input.first().json.Language || 'English');\nconst specialDesc = $input.first().json[\"Special Requests\"] || '';\n\n// å®šä¹‰æ‰©å±•çš„è¯­è¨€æ˜ å°„\nconst languageMap = {\n  'English': {\n    step1TextLabel: 'Ingredients:',\n    step2TextLabel: 'Prep:',\n    step3TextLabel: 'Cook Step 1:',\n    step4TextLabel: 'Cook Step 2:',\n    step1TextExample: '[LIST INGREDIENTS IN ENGLISH, e.g., 2 potatoes, 1 onion, 2 cloves garlic]',\n    step2TextExample: '[DESCRIBE PREP IN ENGLISH, e.g., Peel and slice potatoes, dice onion]',\n    step3TextExample: '[DESCRIBE COOKING STEP 1 IN ENGLISH, e.g., Heat oil, sautÃ© onions]',\n    step4TextExample: '[DESCRIBE COOKING STEP 2 IN ENGLISH, e.g., Add potatoes, fry until golden]',\n    specialInstructionLabel: 'Special Instruction: '\n  },\n  'æ—¥æœ¬èª': {\n    step1TextLabel: 'ææ–™æº–å‚™ï¼š',\n    step2TextLabel: 'ä¸‹æº–å‚™ï¼š',\n    step3TextLabel: 'èª¿ç†â‘ ï¼š',\n    step4TextLabel: 'èª¿ç†â‘¡ï¼š',\n    step1TextExample: '[ææ–™ã‚’æ—¥æœ¬èªã§ãƒªã‚¹ãƒˆã™ã‚‹ï¼Œä¾‹ï¼šã‚¸ãƒ£ã‚¬ã‚¤ãƒ¢2å€‹ã€ç‰ã­ã1å€‹ã€ã«ã‚“ã«ã2ç‰‡]',\n    step2TextExample: '[ä¸‹æº–å‚™ã‚’æ—¥æœ¬èªã§èª¬æ˜ã™ã‚‹ï¼Œä¾‹ï¼šã‚¸ãƒ£ã‚¬ã‚¤ãƒ¢ã¯çš®ã‚’ã‚€ã„ã¦è–„åˆ‡ã‚Šã«ã—ã€ç‰ã­ãã¯ã¿ã˜ã‚“åˆ‡ã‚Šã«ã™ã‚‹]',\n    step3TextExample: '[èª¿ç†ã®ç¬¬ä¸€ã‚¹ãƒ†ãƒƒãƒ—ã‚’æ—¥æœ¬èªã§èª¬æ˜ã™ã‚‹ï¼Œä¾‹ï¼šãƒ•ãƒ©ã‚¤ãƒ‘ãƒ³ã«æ²¹ã‚’ç†±ã—ã€ç‰ã­ãã‚’ç‚’ã‚ã‚‹]',\n    step4TextExample: '[èª¿ç†ã®ç¬¬äºŒã‚¹ãƒ†ãƒƒãƒ—ã‚’æ—¥æœ¬èªã§èª¬æ˜ã™ã‚‹ï¼Œä¾‹ï¼šã‚¸ãƒ£ã‚¬ã‚¤ãƒ¢ã‚’åŠ ãˆã€ãã¤ã­è‰²ã«ãªã‚‹ã¾ã§ç‚’ã‚ã‚‹]',\n    specialInstructionLabel: 'ç‰¹åˆ¥ãªæŒ‡ç¤ºï¼š '\n  },\n  'zh': {\n    step1TextLabel: 'é£Ÿæå‡†å¤‡ï¼š',\n    step2TextLabel: 'é¢„å¤„ç†ï¼š',\n    step3TextLabel: 'çƒ¹é¥ªæ­¥éª¤ä¸€ï¼š',\n    step4TextLabel: 'çƒ¹é¥ªæ­¥éª¤äºŒï¼š',\n    step1TextExample: '[ç”¨ä¸­æ–‡åˆ—å‡ºé£Ÿæï¼Œä¾‹å¦‚ï¼šåœŸè±†2ä¸ªã€æ´‹è‘±1ä¸ªã€å¤§è’œ2ç“£]',\n    step2TextExample: '[ç”¨ä¸­æ–‡æè¿°é¢„å¤„ç†æ­¥éª¤ï¼Œä¾‹å¦‚ï¼šåœŸè±†å»çš®åˆ‡ç‰‡ï¼Œæ´‹è‘±åˆ‡ä¸]',\n    step3TextExample: '[ç”¨ä¸­æ–‡æè¿°ç¬¬ä¸€æ­¥çƒ¹é¥ªï¼Œä¾‹å¦‚ï¼šçƒ­é”…ä¸‹æ²¹ï¼Œç¿»ç‚’æ´‹è‘±]',\n    step4TextExample: '[ç”¨ä¸­æ–‡æè¿°ç¬¬äºŒæ­¥çƒ¹é¥ªï¼Œä¾‹å¦‚ï¼šåŠ å…¥åœŸè±†ç‰‡ï¼Œç…è‡³é‡‘é»„]',\n    specialInstructionLabel: 'ç‰¹æ®Šè¦æ±‚ï¼š '\n  },\n  'Korean': {\n    step1TextLabel: 'ì¬ë£Œ ì¤€ë¹„:',\n    step2TextLabel: 'ì¤€ë¹„ ê³¼ì •:',\n    step3TextLabel: 'ì¡°ë¦¬ â‘ :',\n    step4TextLabel: 'ì¡°ë¦¬ â‘¡:',\n    step1TextExample: '[ì¬ë£Œë¥¼ í•œêµ­ì–´ë¡œ ë‚˜ì—´í•˜ì„¸ìš”, ì˜ˆ: ê°ì 2ê°œ, ì–‘íŒŒ 1ê°œ, ë§ˆëŠ˜ 2ìª½]',\n    step2TextExample: '[ì¤€ë¹„ ê³¼ì •ì„ í•œêµ­ì–´ë¡œ ì„¤ëª…í•˜ì„¸ìš”, ì˜ˆ: ê°ìëŠ” ê»ì§ˆì„ ë²—ê²¨ ì–‡ê²Œ ì°ê³ , ì–‘íŒŒëŠ” ë‹¤ì ¸ì£¼ì„¸ìš”]',\n    step3TextExample: '[ì²« ë²ˆì§¸ ì¡°ë¦¬ ë‹¨ê³„ë¥¼ í•œêµ­ì–´ë¡œ ì„¤ëª…í•˜ì„¸ìš”, ì˜ˆ: íŒ¬ì— ê¸°ë¦„ì„ ë‘ë¥´ê³  ì–‘íŒŒë¥¼ ë³¶ì•„ì£¼ì„¸ìš”]',\n    step4TextExample: '[ë‘ ë²ˆì§¸ ì¡°ë¦¬ ë‹¨ê³„ë¥¼ í•œêµ­ì–´ë¡œ ì„¤ëª…í•˜ì„¸ìš”, ì˜ˆ: ê°ìë¥¼ ë„£ê³  ë…¸ë¦‡ë…¸ë¦‡í•´ì§ˆ ë•Œê¹Œì§€ ë³¶ì•„ì£¼ì„¸ìš”]',\n    specialInstructionLabel: 'íŠ¹ë³„ ì§€ì‹œ: '\n  },\n  'EspaÃ±ol': {\n    step1TextLabel: 'Ingredientes:',\n    step2TextLabel: 'PreparaciÃ³n:',\n    step3TextLabel: 'CocciÃ³n Paso 1:',\n    step4TextLabel: 'CocciÃ³n Paso 2:',\n    step1TextExample: '[LISTA DE INGREDIENTES EN ESPAÃ‘OL, ej: 2 patatas, 1 cebolla, 2 dientes de ajo]',\n    step2TextExample: '[DESCRIBE LA PREPARACIÃ“N EN ESPAÃ‘OL, ej: Pelar y cortar las patatas en rodajas, picar la cebolla]',\n    step3TextExample: '[DESCRIBE EL PRIMER PASO DE COCCIÃ“N EN ESPAÃ‘OL, ej: Calentar aceite, saltear la cebolla]',\n    step4TextExample: '[DESCRIBE EL SEGUNDO PASO DE COCCIÃ“N EN ESPAÃ‘OL, ej: AÃ±adir las patatas, freÃ­r hasta que estÃ©n doradas]',\n    specialInstructionLabel: 'InstrucciÃ³n especial: '\n  },\n  'zh-tw': {\n    step1TextLabel: 'é£Ÿææº–å‚™ï¼š',\n    step2TextLabel: 'é è™•ç†ï¼š',\n    step3TextLabel: 'çƒ¹é£ªæ­¥é©Ÿä¸€ï¼š',\n    step4TextLabel: 'çƒ¹é£ªæ­¥é©ŸäºŒï¼š',\n    step1TextExample: '[ç”¨ç¹é«”ä¸­æ–‡åˆ—å‡ºé£Ÿæï¼Œä¾‹å¦‚ï¼šé¦¬éˆ´è–¯2å€‹ã€æ´‹è”¥1å€‹ã€å¤§è’œ2ç“£]',\n    step2TextExample: '[ç”¨ç¹é«”ä¸­æ–‡æè¿°é è™•ç†æ­¥é©Ÿï¼Œä¾‹å¦‚ï¼šé¦¬éˆ´è–¯å»çš®åˆ‡ç‰‡ï¼Œæ´‹è”¥åˆ‡ä¸]',\n    step3TextExample: '[ç”¨ç¹é«”ä¸­æ–‡æè¿°ç¬¬ä¸€æ­¥çƒ¹é£ªï¼Œä¾‹å¦‚ï¼šç†±é‹ä¸‹æ²¹ï¼Œç¿»ç‚’æ´‹è”¥]',\n    step4TextExample: '[ç”¨ç¹é«”ä¸­æ–‡æè¿°ç¬¬äºŒæ­¥çƒ¹é£ªï¼Œä¾‹å¦‚ï¼šåŠ å…¥é¦¬éˆ´è–¯ç‰‡ï¼Œç…è‡³é‡‘é»ƒ]',\n    specialInstructionLabel: 'ç‰¹æ®Šè¦æ±‚ï¼š '\n  }\n};\n\n// è·å–ç›®æ ‡è¯­è¨€çš„é…ç½®\nconst langConfig = languageMap[language] || languageMap['English'];\n\n// æ„å»ºè¯­è¨€æ˜¾ç¤ºåç§°æ˜ å°„\nconst languageDisplayName = {\n  'English': 'English',\n  'æ—¥æœ¬èª': 'Japanese',\n  'zh': 'Simplified Chinese',\n  'Korean': 'Korean',\n  'EspaÃ±ol': 'Spanish',\n  'zh-tw': 'Traditional Chinese'\n};\n\nconst displayName = languageDisplayName[language] || 'English';\n\n// æ„å»ºç‰¹æ®Šæè¿°çš„å¤„ç†é€»è¾‘\nlet specialInstructionText = '';\nif (specialDesc && specialDesc.trim() !== '') {\n  switch(language) {\n    case 'en':\n      specialInstructionText = `IMPORTANT SPECIAL INSTRUCTION: The user requested: \"${specialDesc}\". Please incorporate this requirement into the recipe design. For example, if they want it \"spicier\", add chili peppers or increase spice amounts.`;\n      break;\n    case 'ja':\n      specialInstructionText = `é‡è¦ãªç‰¹åˆ¥æŒ‡ç¤ºï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã€Œ${specialDesc}ã€ã¨ãƒªã‚¯ã‚¨ã‚¹ãƒˆã—ã¾ã—ãŸã€‚ã“ã®è¦ä»¶ã‚’ãƒ¬ã‚·ãƒ”è¨­è¨ˆã«çµ„ã¿è¾¼ã‚“ã§ãã ã•ã„ã€‚ä¾‹ãˆã°ã€Œã‚‚ã£ã¨è¾›ãã€ã¨è¨€ã‚ã‚ŒãŸã‚‰ã€å”è¾›å­ã‚’è¿½åŠ ã™ã‚‹ã‹ã€ã‚¹ãƒ‘ã‚¤ã‚¹ã®é‡ã‚’å¢—ã‚„ã—ã¦ãã ã•ã„ã€‚`;\n      break;\n    case 'zh':\n      specialInstructionText = `é‡è¦ç‰¹æ®Šè¦æ±‚ï¼šç”¨æˆ·è¦æ±‚ï¼š\"${specialDesc}\"ã€‚è¯·å°†æ­¤è¦æ±‚èå…¥èœè°±è®¾è®¡ä¸­ã€‚ä¾‹å¦‚ï¼Œå¦‚æœè¦æ±‚\"æ›´è¾£ä¸€ç‚¹\"ï¼Œè¯·æ·»åŠ è¾£æ¤’æˆ–å¢åŠ è¾£å‘³è°ƒæ–™ã€‚`;\n      break;\n    case 'ko':\n      specialInstructionText = `ì¤‘ìš”í•œ íŠ¹ë³„ ì§€ì‹œ: ì‚¬ìš©ìê°€ \"${specialDesc}\"ë¥¼ ìš”ì²­í–ˆìŠµë‹ˆë‹¤. ì´ ìš”êµ¬ì‚¬í•­ì„ ë ˆì‹œí”¼ ì„¤ê³„ì— í†µí•©í•´ ì£¼ì„¸ìš”. ì˜ˆë¥¼ ë“¤ì–´ \"ë” ë§¤ìš´ë§›\"ì„ ì›í•œë‹¤ë©´, ê³ ì¶”ë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ ì–‘ë… ì–‘ì„ ëŠ˜ë ¤ì£¼ì„¸ìš”.`;\n      break;\n    case 'es':\n      specialInstructionText = `INSTRUCCIÃ“N ESPECIAL IMPORTANTE: El usuario solicitÃ³: \"${specialDesc}\". Por favor, incorpore este requisito en el diseÃ±o de la receta. Por ejemplo, si quieren \"mÃ¡s picante\", agregue chiles o aumente las cantidades de especias.`;\n      break;\n    case 'zh-tw':\n      specialInstructionText = `é‡è¦ç‰¹æ®Šè¦æ±‚ï¼šç”¨æˆ¶è¦æ±‚ï¼š\"${specialDesc}\"ã€‚è«‹å°‡æ­¤è¦æ±‚èå…¥é£Ÿè­œè¨­è¨ˆä¸­ã€‚ä¾‹å¦‚ï¼Œå¦‚æœè¦æ±‚\"æ›´è¾£ä¸€é»\"ï¼Œè«‹æ·»åŠ è¾£æ¤’æˆ–å¢åŠ è¾£å‘³èª¿æ–™ã€‚`;\n      break;\n    default:\n      specialInstructionText = `IMPORTANT SPECIAL INSTRUCTION: The user requested: \"${specialDesc}\". Please incorporate this requirement into the recipe design.`;\n  }\n}\n\n// æ„å»ºå…ƒæç¤ºè¯æ¨¡æ¿ - åŸºäºä¸Šä¸Šä¸ªç‰ˆæœ¬ï¼Œæ·»åŠ èœåæ˜¾ç¤ºæŒ‡ä»¤\nconst metaPromptTemplate = `You are a professional AI painting prompt architect specializing in structured, high-precision prompts for cooking tutorials and recipe illustrations.\n\nTASK:\nGenerate a complete, executable AI painting prompt based on:\n1. User-provided ingredient: \"${foodName}\"\n2. Language requirement: **${displayName}**\n${specialDesc ? `3. Special user request: \"${specialDesc}\"` : ''}\n\nOUTPUT FORMAT & REQUIREMENTS:\nYour output MUST be the full prompt text in the following exact format. Dynamically replace all instances of \\`[Dish/Ingredient Concept]\\` and related descriptions based on the provided ingredient (\"${foodName}\").\n\nFIXED TEMPLATE TO FOLLOW:\n\"\"\"\nGenerate a vertical, hand-drawn style cooking tutorial infographic in a compact and balanced layout. The composition MUST be clearly divided into FOUR distinct, sequential visual steps arranged from top to bottom. The overall background is a soft, irregular watercolor wash in pink and cream tones, creating a warm and cute atmosphere.\n\n**IMPORTANT: Dish Name Display Requirement**\n- **CRITICAL INSTRUCTION:** You MUST include a prominent dish name at the top of the composition. Based on the ingredient \"${foodName}\", create an appealing and appropriate dish name in **${displayName}** language. The dish name should be displayed in an elegant, hand-drawn calligraphy style that complements the overall watercolor theme.\n- **Visual Integration:** The dish name should be integrated seamlessly into the top section of the composition, using colors and styles that match the overall pink and cream watercolor theme. Consider using warm brown or burgundy text colors that contrast beautifully with the background.\n- **Positioning:** The dish name should be the most prominent visual element at the top, creating a clear visual hierarchy before the four cooking steps.\n\n**Step 1: Ingredients Preparation (Top Section)**\n- **Visual:** A smaller, light blue, irregularly shaped background panel with soft, watercolor-bleeding edges. Inside, on the left, display the raw ingredients arranged neatly and compactly: [DESCRIBE 3-5 CORE INGREDIENTS FOR A SIMPLE DISH BASED ON \"${foodName}\" IN ${displayName.toUpperCase()}, e.g., two potatoes (washed, with skin), one onion (peeled), two cloves of garlic, a sprig of rosemary, one tablespoon of butter].\n- **Text:** On the right side of the panel, smaller handwritten text in dark brown: \"${langConfig.step1TextLabel} ${langConfig.step1TextExample}\"\n\n**Step 2: Ingredient Pre-processing (Second Section)**\n- **Visual:** A second smaller light blue irregular panel below the first. Inside, a smaller wooden cutting board. On the board: [DESCRIBE THE PRE-PROCESSING OF STEP 1 INGREDIENTS IN ${displayName.toUpperCase()}, e.g., potatoes cut into thin slices (piled on the left), onion finely diced (in the center), minced garlic (a tiny pile on the right)].\n- **Text:** Smaller handwritten text on the right: \"${langConfig.step2TextLabel} ${langConfig.step2TextExample}\"\n\n**Step 3: Cooking Process - Step One (Third Section)**\n- **Visual:** A third smaller light blue irregular panel. Inside, a smaller black frying pan with a brown wooden handle. The pan shows a small amount of hot oil, and [DESCRIBE THE FIRST COOKING ACTION IN ${displayName.toUpperCase()}, e.g., melting the butter and sautÃ©ing the onions until translucent].\n- **Text:** Smaller handwritten text on the right: \"${langConfig.step3TextLabel} ${langConfig.step3TextExample}\"\n\n**Step 4: Cooking Process - Step Two (Bottom Section)**\n- **Visual:** A fourth smaller light blue irregular panel at the bottom. The same smaller black frying pan now contains [DESCRIBE ADDING REMAINING INGREDIENTS AND FINAL COOKING IN ${displayName.toUpperCase()}, e.g., the potato slices and rosemary, being pan-fried until golden and crispy. Season with salt and pepper].\n- **Text:** Smaller handwritten text on the right: \"${langConfig.step4TextLabel} ${langConfig.step4TextExample}\"\n\n**Overall Style & Details:**\n- **Art Style:** Cute, hand-drawn illustration with ink outlines and soft watercolor fills. The style should be detailed yet delicate, suitable for a smaller format.\n- **Layout:** A clear, vertical sequence starting with the prominent dish name at the top, followed by four cooking steps.\n- **Visual Hierarchy:** The dish name at the top must be the most visually dominant element, followed by the four step panels. This creates a professional menu-like appearance.\n- **Detail & Color:** Pay attention to realistic but miniaturized food textures. Employ watercolor techniques for soft fills. Colors should be warm and appetizing.\n- **Proportion:** All visual elements must be scaled down proportionally. The entire infographic should feel less sprawling and more concentrated.\n${specialDesc ? `- **Special Requirement:** ${langConfig.specialInstructionLabel}${specialDesc}` : ''}\n\n**Negative Prompt:** blurry, distorted, ugly, extra fingers, bad anatomy, text watermark, signature, low quality, only three steps, merged panels, geometric grid background, oversized elements, sprawling composition, too much empty space, elements too large for frame, dish name too small, unclear hierarchy, missing dish name.\n\"\"\"\n\nCONSTRAINTS & GUIDELINES:\n1.  **Dish Concept:** Invent a simple, logical home-cooking recipe process for \"${foodName}\" (e.g., fried potato slices, scrambled eggs with tomatoes). The four-step logic must be clear: Preparation -> Pre-processing -> Cooking Step 1 -> Cooking Step 2.\n2.  **Dish Name Generation:** CRITICAL: You MUST create and include an appealing dish name based on \"${foodName}\" in **${displayName}** language. The dish name should be creative, appetizing, and appropriate for the dish concept. DO NOT use a fixed or pre-defined dish name - generate it dynamically based on the ingredient and recipe concept.\n3.  **Dish Name Display:** The dish name must be prominently displayed at the top of the composition in a style that matches the overall watercolor hand-drawn theme. Use elegant calligraphy or handwritten fonts, appropriate colors (warm browns or burgundies), and integrate it seamlessly with the overall design.\n4.  **Language Consistency:** The entire prompt, including all instructions within the Visual and Text descriptions, must be in **${displayName}**. The AI that receives this prompt will generate an image with text in this language.\n5.  **Special Requirement Integration:** ${specialDesc ? `CRITICAL: The user has specified a special requirement: \"${specialDesc}\". You MUST incorporate this requirement into the recipe design. For example, if they want it \"spicier\", design a spicier version of the dish by adding chili peppers, increasing spice amounts, or using spicier ingredients. Make sure this adjustment is reflected in the ingredients list and cooking steps.` : 'No special requirements specified.'}\n6.  **Visual Description:** In Step 1's Visual part, describe the ingredients' appearance (e.g., \"peeled\", \"sliced\", \"with skin\") to make them visually evocative.\n7.  **Text Content:** The Text parts (right side of each panel) must contain plausible cooking instructions in **${displayName}**.\n8.  **Style Consistency:** Strictly maintain \"compact layout,\" \"light blue watercolor panels,\" \"handwritten text,\" and \"warm, cute atmosphere.\" The dish name display should complement this style while being appropriately prominent.\n9.  **Final Output:** Return ONLY the completed prompt text as specified in the FIXED TEMPLATE, with no extra explanations. The dish name must be included in the visual description section.\n\nNow, generate the ${displayName} prompt for a dish based on \"${foodName}\"${specialDesc ? ` with the special requirement: \"${specialDesc}\"` : ''}. Remember to create and include an appropriate dish name in the composition.`;\n\n// å°†ç”Ÿæˆçš„å…ƒæç¤ºè¯èµ‹å€¼ç»™è¾“å‡ºé¡¹çš„æ–°å­—æ®µ\n$input.item.json.ai_prompt = metaPromptTemplate;\n\n// è¿”å›ä¿®æ”¹åçš„æ•°æ®é¡¹ï¼Œä¾›å·¥ä½œæµä¸­çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä½¿ç”¨\nreturn $input.item;\n"
      },
      "id": "918e00b4-1374-4e50-a16f-0e76e1687023",
      "name": "Build AI Prompt",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -864,
        -80
      ]
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gemini-2.5-flash-image-preview",
          "mode": "id"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -192,
        112
      ],
      "id": "0fe0a377-adde-4017-a755-3ff01dec28ac",
      "name": "gemini-2.5-flash-image",
      "credentials": {
        "openAiApi": {
          "id": "yZQEiSRcGtLtzCIp",
          "name": "api.mulerun.com"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.output }}",
        "options": {
          "passthroughBinaryImages": true
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        -192,
        -80
      ],
      "id": "b5abd3ee-5a28-453c-a16d-b1d7aea60fd0",
      "name": "generate image agent"
    },
    {
      "parameters": {
        "fieldToSplitOut": "output",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        336,
        128
      ],
      "id": "7a56f521-d834-4171-93ef-0e857d3cfdbf",
      "name": "content extract image1"
    },
    {
      "parameters": {
        "jsCode": "// ç­›é€‰åŒ…å«image_urlå­—æ®µçš„item\nreturn items.filter(item => {\n  return item.json.image_url !== undefined;\n});"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        544,
        128
      ],
      "id": "a7da1711-3b59-497d-ae64-0d081ddf9a1d",
      "name": "Get Image Items1"
    },
    {
      "parameters": {
        "jsCode": "function generateRecipeCard(foot, imageDataUrl, language = 'English') {\n    // å‚æ•°éªŒè¯\n    if (!foot || !imageDataUrl) {\n        return {\n            html: '<div style=\"padding: 20px; color: red; font-family: sans-serif;\">é”™è¯¯ï¼šç¼ºå°‘é£Ÿç‰©åç§°æˆ–å›¾ç‰‡æ•°æ®</div>',\n            error: 'Missing required parameters: foot or imageDataUrl'\n        };\n    }\n\n    // è·å–å½“å‰æ—¥æœŸ\n    const now = new Date();\n    const dateStr = now.toISOString().split('T')[0];\n    \n    // åˆ›å»ºå®‰å…¨çš„æ–‡ä»¶å\n    const safeFoodName = foot.replace(/[^a-zA-Z0-9]/g, '_');\n    \n    // å¤šè¯­è¨€å­—å…¸ - æ”¯æŒå…­ç§è¯­è¨€\n    const translations = {\n        'English': {\n            'title': `ğŸ‰ Your ${foot} Recipe Card is Ready!`,\n            'subtitle': 'You can save this card, print it for your kitchen, or share it on social media!',\n            'downloadTitle': 'Download Recipe Card',\n            'downloadDesc': 'Save this beautiful recipe card to your device',\n            'downloadBtn': 'Download Now',\n            'footerPrefix': 'Generated on',\n            'footerSuffix': 'Cartoon Cookbook | Keep cooking and sharing the joy!',\n            'imageAlt': `${foot} Recipe`,\n            'loadingText': 'Drawing your recipe...'\n        },\n        'ä¸­æ–‡ç®€ä½“': {\n            'title': `ğŸ‰ æ‚¨çš„${foot}é£Ÿè°±å¡ç‰‡å·²ç”Ÿæˆï¼`,\n            'subtitle': 'æ‚¨å¯ä»¥ä¿å­˜æ­¤å¡ç‰‡ã€æ‰“å°æˆ–åˆ†äº«åˆ°ç¤¾äº¤åª’ä½“ï¼',\n            'downloadTitle': 'ä¸‹è½½é£Ÿè°±å¡ç‰‡',\n            'downloadDesc': 'å°†è¿™å¼ ç²¾ç¾çš„é£Ÿè°±å¡ç‰‡ä¿å­˜åˆ°æ‚¨çš„è®¾å¤‡',\n            'downloadBtn': 'ç«‹å³ä¸‹è½½',\n            'footerPrefix': 'ç”Ÿæˆäº',\n            'footerSuffix': 'Cartoon Cookbook | æŒç»­çƒ¹é¥ªï¼Œåˆ†äº«å¿«ä¹ï¼',\n            'imageAlt': `${foot} é£Ÿè°±`,\n            'loadingText': 'æ­£åœ¨ç»˜åˆ¶æ‚¨çš„é£Ÿè°±...'\n        },\n        'ä¸­æ–‡ç¹ä½“': {\n            'title': `ğŸ‰ æ‚¨çš„${foot}é£Ÿè­œå¡ç‰‡å·²ç”Ÿæˆï¼`,\n            'subtitle': 'æ‚¨å¯ä»¥ä¿å­˜æ­¤å¡ç‰‡ã€åˆ—å°æˆ–åˆ†äº«åˆ°ç¤¾äº¤åª’é«”ï¼',\n            'downloadTitle': 'ä¸‹è¼‰é£Ÿè­œå¡ç‰‡',\n            'downloadDesc': 'å°‡é€™å¼µç²¾ç¾çš„é£Ÿè­œå¡ç‰‡ä¿å­˜åˆ°æ‚¨çš„è£ç½®',\n            'downloadBtn': 'ç«‹å³ä¸‹è¼‰',\n            'footerPrefix': 'ç”Ÿæˆæ–¼',\n            'footerSuffix': 'Cartoon Cookbook | æŒçºŒçƒ¹é£ªï¼Œåˆ†äº«å¿«æ¨‚ï¼',\n            'imageAlt': `${foot} é£Ÿè­œ`,\n            'loadingText': 'æ­£åœ¨ç¹ªè£½æ‚¨çš„é£Ÿè­œ...'\n        },\n        'æ—¥æœ¬èª': {\n            'title': `ğŸ‰ ${foot}ã®ãƒ¬ã‚·ãƒ”ã‚«ãƒ¼ãƒ‰ãŒå®Œæˆã—ã¾ã—ãŸï¼`,\n            'subtitle': 'ã‚«ãƒ¼ãƒ‰ã‚’ä¿å­˜ã—ãŸã‚Šã€å°åˆ·ã—ãŸã‚Šã€SNSã§ã‚·ã‚§ã‚¢ã—ãŸã‚Šã§ãã¾ã™ï¼',\n            'downloadTitle': 'ãƒ¬ã‚·ãƒ”ã‚«ãƒ¼ãƒ‰ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰',\n            'downloadDesc': 'ã“ã®ç¾ã—ã„ãƒ¬ã‚·ãƒ”ã‚«ãƒ¼ãƒ‰ã‚’ãƒ‡ãƒã‚¤ã‚¹ã«ä¿å­˜ã—ã¾ã™',\n            'downloadBtn': 'ä»Šã™ããƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰',\n            'footerPrefix': 'ç”Ÿæˆæ—¥æ™‚ï¼š',\n            'footerSuffix': 'Cartoon Cookbook | æ–™ç†ã®å–œã³ã‚’ã‚·ã‚§ã‚¢ã—ã¾ã—ã‚‡ã†ï¼',\n            'imageAlt': `${foot} ãƒ¬ã‚·ãƒ”`,\n            'loadingText': 'ãƒ¬ã‚·ãƒ”ã‚’æç”»ä¸­...'\n        },\n        'EspaÃ±ol': {\n            'title': `ğŸ‰ Â¡Tu Tarjeta de Receta de ${foot} estÃ¡ Lista!`,\n            'subtitle': 'Â¡Puedes guardar esta tarjeta, imprimirla para tu cocina o compartirla en redes sociales!',\n            'downloadTitle': 'Descargar Tarjeta de Receta',\n            'downloadDesc': 'Guarda esta hermosa tarjeta de receta en tu dispositivo',\n            'downloadBtn': 'Descargar Ahora',\n            'footerPrefix': 'Generado el',\n            'footerSuffix': 'Cartoon Cookbook | Â¡Sigue cocinando y compartiendo la alegrÃ­a!',\n            'imageAlt': `Receta de ${foot}`,\n            'loadingText': 'Dibujando tu receta...'\n        },\n        'Korean': {\n            'title': `ğŸ‰ ${foot}ãƒ¬ã‚·ãƒ”ã‚«ãƒ¼ãƒ‰ãŒå®Œæˆã—ã¾ã—ãŸ!`,\n            'subtitle': 'ì´ ì¹´ë“œë¥¼ ì €ì¥í•˜ê±°ë‚˜, ì¸ì‡„í•˜ê±°ë‚˜, ì†Œì…œ ë¯¸ë””ì–´ì— ê³µìœ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!',\n            'downloadTitle': 'ë ˆì‹œí”¼ ì¹´ë“œ ë‹¤ìš´ë¡œë“œ',\n            'downloadDesc': 'ì´ ì•„ë¦„ë‹¤ìš´ ë ˆì‹œí”¼ ì¹´ë“œë¥¼ ê¸°ê¸°ì— ì €ì¥í•˜ì„¸ìš”',\n            'downloadBtn': 'ì§€ê¸ˆ ë‹¤ìš´ë¡œë“œ',\n            'footerPrefix': 'ìƒì„± ì¼ì‹œï¼š',\n            'footerSuffix': 'Cartoon Cookbook | ìš”ë¦¬ì˜ ì¦ê±°ì›€ì„ ë‚˜ëˆ„ì„¸ìš”!',\n            'imageAlt': `${foot} ë ˆì‹œí”¼`,\n            'loadingText': 'ë ˆì‹œí”¼ë¥¼ ê·¸ë¦¬ëŠ” ì¤‘...'\n        }\n    };\n    \n    // è·å–å½“å‰è¯­è¨€æ–‡æœ¬\n    const lang = translations[language] ? language : 'English';\n    const t = translations[lang];\n    \n    // ç”Ÿæˆå®Œæ•´çš„HTML - ä½¿ç”¨æœ€æ–°çš„Font Awesome 6å›¾æ ‡\n    const htmlContent = `\n<!DOCTYPE html>\n<html lang=\"${lang}\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>${foot} Recipe Card</title>\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n        \n        body {\n            background-color: #FFF9F0;\n            min-height: 100vh;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            padding: 20px;\n            font-family: 'Caveat', cursive, sans-serif;\n        }\n        \n        .recipe-container {\n            max-width: 900px;\n            width: 100%;\n            background-color: white;\n            border-radius: 25px 10px 25px 10px;\n            box-shadow: 3px 3px 0px rgba(0, 0, 0, 0.1), \n                        6px 6px 0px rgba(0, 0, 0, 0.05);\n            overflow: hidden;\n            border: 3px solid #FF9E6D;\n        }\n        \n        .content {\n            display: flex;\n            flex-wrap: wrap;\n            padding: 30px;\n            gap: 30px;\n            align-items: stretch;\n        }\n        \n        @media (max-width: 768px) {\n            .content {\n                flex-direction: column;\n            }\n        }\n        \n        .image-section {\n            flex: 7;\n            min-width: 300px;\n            display: flex;\n            align-items: stretch;\n        }\n        \n        .recipe-image-container {\n            position: relative;\n            border-radius: 20px 5px 20px 5px;\n            overflow: hidden;\n            box-shadow: 3px 3px 0px rgba(0, 0, 0, 0.1), \n                        6px 6px 0px rgba(0, 0, 0, 0.05);\n            border: 3px solid #A8E6CF;\n            background-color: transparent;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            width: 100%;\n            min-height: 500px;\n        }\n        \n        .recipe-image {\n            width: 100%;\n            height: auto;\n            max-height: 500px;\n            display: block;\n            border-radius: 18px 3px 18px 3px;\n            object-fit: contain;\n        }\n        \n        .loading-indicator {\n            position: absolute;\n            top: 50%;\n            left: 50%;\n            transform: translate(-50%, -50%);\n            color: #5D5D5D;\n            font-size: 20px;\n            font-weight: bold;\n        }\n        \n        .actions-section {\n            flex: 3;\n            min-width: 300px;\n            display: flex;\n            flex-direction: column;\n            height: 500px;\n        }\n        \n        .download-card {\n            background: linear-gradient(135deg, #A8E6CF, #88D3B8);\n            color: #5D5D5D;\n            border-radius: 15px 5px 15px 5px;\n            border: 3px solid #A8E6CF;\n            box-shadow: 3px 3px 0px rgba(0, 0, 0, 0.1);\n            padding: 20px 15px;\n            text-align: center;\n            display: flex;\n            flex-direction: column;\n            height: 100%;\n            justify-content: center;\n        }\n        \n        .download-content {\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            height: 100%;\n            justify-content: center;\n        }\n        \n        .download-icon-btn {\n            display: inline-flex;\n            align-items: center;\n            justify-content: center;\n            background: white;\n            color: #5D5D5D;\n            width: 80px;\n            height: 80px;\n            border-radius: 50%;\n            text-decoration: none;\n            font-weight: 700;\n            font-size: 16px;\n            border: 3px solid #A8E6CF;\n            cursor: pointer;\n            box-shadow: 3px 3px 0px rgba(0, 0, 0, 0.15);\n            font-family: 'Caveat', cursive;\n            transition: all 0.3s ease;\n            margin-bottom: 15px;\n        }\n        \n        .download-icon-btn:hover {\n            background: #A8E6CF;\n            color: white;\n            transform: translateY(-3px) scale(1.05);\n        }\n        \n        .download-icon-btn i {\n            font-size: 36px;\n        }\n        \n        .download-card h3 {\n            font-size: 22px;\n            margin-bottom: 8px;\n            font-weight: 700;\n            line-height: 1.3;\n        }\n        \n        .download-card p {\n            font-size: 14px;\n            opacity: 0.9;\n            line-height: 1.4;\n        }\n        \n        /* å“åº”å¼è®¾è®¡ */\n        @media (min-width: 1200px) {\n            .recipe-container {\n                max-width: 1100px;\n            }\n            \n            .content {\n                gap: 30px;\n                padding: 35px;\n            }\n            \n            .recipe-image {\n                max-height: 550px;\n            }\n            \n            .recipe-image-container {\n                min-height: 550px;\n            }\n            \n            .actions-section {\n                height: 550px;\n            }\n            \n            .download-icon-btn {\n                width: 85px;\n                height: 85px;\n            }\n            \n            .download-icon-btn i {\n                font-size: 40px;\n            }\n        }\n        \n        @media (max-width: 768px) {\n            .content {\n                gap: 20px;\n                padding: 20px;\n            }\n            \n            .recipe-image-container {\n                min-height: 400px;\n            }\n            \n            .recipe-image {\n                max-height: 400px;\n            }\n            \n            .actions-section {\n                height: auto;\n                min-height: 200px;\n            }\n            \n            .download-card {\n                min-height: 200px;\n            }\n            \n            .download-icon-btn {\n                width: 70px;\n                height: 70px;\n            }\n            \n            .download-icon-btn i {\n                font-size: 32px;\n            }\n        }\n        \n        @media (max-width: 480px) {\n            .download-icon-btn {\n                width: 60px;\n                height: 60px;\n            }\n            \n            .download-icon-btn i {\n                font-size: 28px;\n            }\n            \n            .download-card h3 {\n                font-size: 20px;\n            }\n        }\n        \n        .no-overlap {\n            position: relative;\n            z-index: 1;\n        }\n    </style>\n    <!-- ä½¿ç”¨Font Awesome 6.5.1æœ€æ–°ç‰ˆæœ¬ -->\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css\" integrity=\"sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==\" crossorigin=\"anonymous\" referrerpolicy=\"no-referrer\" />\n    <link href=\"https://fonts.googleapis.com/css2?family=Caveat:wght@400;500;600;700&display=swap\" rel=\"stylesheet\">\n</head>\n<body>\n    <div class=\"recipe-container\">\n        <div class=\"content\">\n            <div class=\"image-section\">\n                <div class=\"recipe-image-container\">\n                    <div class=\"loading-indicator\" id=\"loadingIndicator\">\n                        <i class=\"fas fa-spinner fa-spin\"></i> ${t.loadingText}\n                    </div>\n                    <img src=\"${imageDataUrl}\" alt=\"${t.imageAlt}\" class=\"recipe-image\" id=\"recipeImage\" \n                         onload=\"document.getElementById('loadingIndicator').style.display='none'\"\n                         onerror=\"handleImageError()\">\n                </div>\n            </div>\n            \n            <div class=\"actions-section no-overlap\">\n                <div class=\"download-card\">\n                    <div class=\"download-content\">\n                        <button class=\"download-icon-btn\" onclick=\"downloadImage()\" title=\"${t.downloadBtn}\">\n                            <i class=\"fas fa-download\"></i>\n                        </button>\n                        <h3>${t.downloadTitle}</h3>\n                        <p>${t.downloadDesc}</p>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <script>\n        // å›¾ç‰‡åŠ è½½é”™è¯¯å¤„ç†\n        function handleImageError() {\n            const indicator = document.getElementById('loadingIndicator');\n            if (indicator) {\n                indicator.innerHTML = '<i class=\"fas fa-exclamation-triangle\"></i> Failed to load image';\n                indicator.style.color = 'red';\n            }\n            \n            const downloadBtn = document.querySelector('.download-icon-btn');\n            if (downloadBtn) {\n                downloadBtn.disabled = true;\n                downloadBtn.title = 'Image failed to load';\n            }\n        }\n        \n        // ä¸‹è½½å›¾ç‰‡åŠŸèƒ½\n        function downloadImage() {\n            try {\n                const imgElement = document.getElementById('recipeImage');\n                if (!imgElement) {\n                    throw new Error('Image element not found');\n                }\n                \n                const safeFoodName = \"${safeFoodName}\".replace(/[^a-zA-Z0-9]/g, '_');\n                const currentDate = \"${dateStr}\";\n                const fileName = safeFoodName + '_RecipeCard_' + currentDate + '.png';\n                const imgUrl = imgElement.src;\n                \n                if (!imgUrl) {\n                    throw new Error('Invalid image URL');\n                }\n                \n                const link = document.createElement('a');\n                link.href = imgUrl;\n                link.download = fileName;\n                document.body.appendChild(link);\n                link.click();\n                document.body.removeChild(link);\n                \n                alert('Your \"' + \"${foot}\" + '\" recipe card has been saved!');\n                \n            } catch (error) {\n                alert('Failed to download image. Please try again.');\n            }\n        }\n        \n        // åˆå§‹åŒ–\n        window.addEventListener('load', function() {\n            const imgElement = document.getElementById('recipeImage');\n            if (imgElement && imgElement.complete && imgElement.naturalHeight !== 0) {\n                const indicator = document.getElementById('loadingIndicator');\n                if (indicator) indicator.style.display = 'none';\n            }\n        });\n    </script>\n</body>\n</html>`;\n\n    // è¿”å›ç»“æœå¯¹è±¡\n    return {\n        html: htmlContent,\n        fileName: `${safeFoodName}_recipe_card.html`,\n        foodName: foot,\n        language: lang,\n        timestamp: now.toISOString(),\n        message: `Recipe card for \"${foot}\" generated successfully in ${lang} language.`\n    };\n}\n\n// ================ Code èŠ‚ç‚¹ä¸»æ‰§è¡Œé€»è¾‘ ================\ntry {\n    // ä»è¾“å…¥å¯¹è±¡è·å–å‚æ•°\n    const foot = $('Cartoon Cookbook')?.first()?.json?.['Dish Name'] || \n                 $input.first().json.foot || \n                 $input.first().json.foodName || \n                 $input.first().json.dishName || \n                 \"Delicious Dish\";\n    \n    // è·å–imageDataUrl\n    const imageDataUrl = $input.first().json.imageDataUrl || \"\";\n    \n    const language = $('Cartoon Cookbook')?.first()?.json?.Language || \n                     $input.first().json.language || \n                     'English';\n    \n    // éªŒè¯å›¾ç‰‡URL\n    if (!imageDataUrl) {\n        return {\n            html: '<div style=\"padding: 20px; color: red; font-family: sans-serif;\">Error: Missing Image URL</div>',\n            error: 'Missing imageDataUrl parameter'\n        };\n    }\n    \n    // ç”Ÿæˆé£Ÿè°±å¡ç‰‡\n    const result = generateRecipeCard(foot, imageDataUrl, language);\n    \n    // è¾“å‡ºç»“æœ\n    return result;\n    \n} catch (error) {\n    return {\n        html: '<div style=\"padding: 20px; color: red; font-family: sans-serif;\">Error Generating Recipe Card</div>',\n        error: error.message\n    };\n}"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        928,
        128
      ],
      "id": "81203a33-39d6-4aa5-a1c1-52ad90d43d7b",
      "name": "HTML OUTPUT"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.ai_prompt }}",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3,
      "position": [
        -608,
        -80
      ],
      "id": "e44b53d4-31ad-45f9-94ef-56b6ebe3288a",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "formTitle": "Cartoon Cookbook",
        "formDescription": "Cartoon Cookbook",
        "formFields": {
          "values": [
            {
              "fieldLabel": "Dish Name",
              "placeholder": "e.g. Beef, Eggs, Tomatoes, your favorite food",
              "requiredField": true
            },
            {
              "fieldLabel": "Language",
              "fieldType": "dropdown",
              "fieldOptions": {
                "values": [
                  {
                    "option": "English"
                  },
                  {
                    "option": "EspaÃ±ol"
                  }
                ]
              },
              "requiredField": true
            },
            {
              "fieldLabel": "Special Requests",
              "fieldType": "textarea",
              "placeholder": "e.g. Extra cheese, please, Less spicy, Thai-style flavor preferred"
            }
          ]
        },
        "options": {
          "buttonLabel": "Start"
        }
      },
      "type": "n8n-nodes-base.formTrigger",
      "typeVersion": 2.3,
      "position": [
        -1088,
        -80
      ],
      "id": "28aaf973-e49a-45a7-b73f-4112aa234431",
      "name": "Cartoon Cookbook",
      "webhookId": "b212649e-b4ef-4db1-affb-b3090208029c"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gemini-2.5-pro",
          "mode": "id"
        },
        "responsesApiEnabled": false,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.3,
      "position": [
        -608,
        128
      ],
      "id": "41e48ab4-6871-487a-b865-f7a4609ee517",
      "name": "gemini-2.5-pro",
      "credentials": {
        "openAiApi": {
          "id": "yZQEiSRcGtLtzCIp",
          "name": "api.mulerun.com"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// 1. é¦–å…ˆï¼Œå°†Base64æ•°æ®ä»è¾“å…¥ä¸­æå–å‡ºæ¥ï¼Œèµ‹å€¼ç»™ä¸€ä¸ªå˜é‡\nconst base64String = $input.first().json.image_url.url;\n\n// 2. ç„¶åï¼Œç”¨è¿™ä¸ªå˜é‡çš„å€¼æ¥æ„é€ å®Œæ•´çš„Data URL\nconst dataUrl = `data:image/jpeg;base64,${base64String}`;\n\n// 3. è¾“å‡ºåˆ°ä¸‹ä¸€èŠ‚ç‚¹\nreturn [{ json: { imageDataUrl: dataUrl } }];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        736,
        128
      ],
      "id": "00b1801c-455f-42b8-a3c1-0fbf02569069",
      "name": "ToImageUrl"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "406fb9f3-db45-47fb-a307-1b242423303e",
              "name": "html_content",
              "value": "={{ $json.html }}",
              "type": "string"
            }
          ]
        },
        "includeOtherFields": true,
        "include": "selected",
        "includeFields": "=",
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1200,
        128
      ],
      "id": "b9140371-4523-4de0-9074-062776b3ebdf",
      "name": "Markdown Output"
    },
    {
      "parameters": {
        "operation": "completion",
        "respondWith": "showText",
        "responseText": "={{ $json.html }}"
      },
      "type": "n8n-nodes-base.form",
      "typeVersion": 2.3,
      "position": [
        1200,
        320
      ],
      "id": "01086898-820f-44bc-8a03-cbfc139096a4",
      "name": "Form",
      "webhookId": "3d53e820-3c06-46a7-a525-148ac54ad056"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "2236745b-f2cb-4243-965d-e9f3ba5e638e",
              "name": "ImageBase64",
              "value": "={{$json.output.find(o => o.type === 'image_url')?.image_url?.url}}",
              "type": "string"
            },
            {
              "id": "d67c3ca9-a724-42d2-aff7-a52714e8d341",
              "name": "",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        128,
        -80
      ],
      "id": "da045d9c-36a3-4c65-b243-9f032b08cb34",
      "name": "Get Image OutPut"
    },
    {
      "parameters": {
        "operation": "toBinary",
        "sourceProperty": "ImageBase64",
        "binaryPropertyName": "Image",
        "options": {}
      },
      "type": "n8n-nodes-base.convertToFile",
      "typeVersion": 1.1,
      "position": [
        336,
        -80
      ],
      "id": "5a4e16c3-5045-4b0f-92e6-b6aba09432c1",
      "name": "Convert to File1"
    },
    {
      "parameters": {
        "operation": "text",
        "options": {}
      },
      "type": "n8n-nodes-base.editImage",
      "typeVersion": 1,
      "position": [
        1248,
        -62.03615180860915
      ],
      "id": "dea20c05-68a2-4892-963e-9ec168a02582",
      "name": "Edit Image"
    }
  ],
  "pinData": {},
  "connections": {
    "Build AI Prompt": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "gemini-2.5-flash-image": {
      "ai_languageModel": [
        [
          {
            "node": "generate image agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "generate image agent": {
      "main": [
        [
          {
            "node": "Get Image OutPut",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "content extract image1": {
      "main": [
        [
          {
            "node": "Get Image Items1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Image Items1": {
      "main": [
        [
          {
            "node": "ToImageUrl",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTML OUTPUT": {
      "main": [
        [
          {
            "node": "Markdown Output",
            "type": "main",
            "index": 0
          },
          {
            "node": "Form",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "generate image agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cartoon Cookbook": {
      "main": [
        [
          {
            "node": "Build AI Prompt",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "gemini-2.5-pro": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "ToImageUrl": {
      "main": [
        [
          {
            "node": "HTML OUTPUT",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Markdown Output": {
      "main": [
        []
      ]
    },
    "Get Image OutPut": {
      "main": [
        [
          {
            "node": "Convert to File1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Convert to File1": {
      "main": [
        []
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "38db9df2-b21f-4ced-ae3d-c3320969e314",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "571ec23ec555288f49513ac121bba48440a081bd60649c25074da2db57cc89ee"
  },
  "id": "cKiZsjpDe49IwxgE",
  "tags": []
}